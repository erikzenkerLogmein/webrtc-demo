!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(4)},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(){}n.r(t);function c(e){return e()}function a(){return Object.create(null)}function o(e){e.forEach(c)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function u(e,t,n){e.$$.on_destroy.push(l(t,n))}new Set;function d(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function v(){return h(" ")}function g(){return h("")}function $(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let y;function k(e){y=e}function S(){if(!y)throw new Error("Function called outside component initialization");return y}function O(e){S().$$.on_mount.push(e)}function C(){const e=y;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const c=w(t,n);r.slice().forEach(t=>{t.call(e,c)})}}}const x=[],j=[],R=[],T=[],E=Promise.resolve();let N=!1;function D(){N||(N=!0,E.then(A))}function L(e){R.push(e)}function A(){const e=new Set;do{for(;x.length;){const e=x.shift();k(e),M(e.$$)}for(;j.length;)j.pop()();for(let t=0;t<R.length;t+=1){const n=R[t];e.has(n)||(n(),e.add(n))}R.length=0}while(x.length);for(;T.length;)T.pop()();N=!1}function M(e){e.fragment&&(e.update(e.dirty),o(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(L))}const J=new Set;let P;function V(e,t){e&&e.i&&(J.delete(e),e.i(t))}function z(e,t,n,r){if(e&&e.o){if(J.has(e))return;J.add(e),P.c.push(()=>{J.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}"undefined"!=typeof window?window:global;let I;function U(e,t,n){const{fragment:r,on_mount:a,on_destroy:s,after_update:l}=e.$$;r.m(t,n),L(()=>{const t=a.map(c).filter(i);s?s.push(...t):o(t),e.$$.on_mount=[]}),l.forEach(L)}function q(e,t){e.$$.fragment&&(o(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function F(e,t,n,c,i,s){const l=y;k(e);const u=t.props||{},d=e.$$={fragment:null,ctx:null,props:s,update:r,not_equal:i,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:a(),dirty:null};let f=!1;var p;d.ctx=n?n(e,u,(t,n)=>{d.ctx&&i(d.ctx[t],d.ctx[t]=n)&&(d.bound[t]&&d.bound[t](n),f&&function(e,t){e.$$.dirty||(x.push(e),D(),e.$$.dirty=a()),e.$$.dirty[t]=!0}(e,t))}):u,d.update(),f=!0,o(d.before_update),d.fragment=c(d.ctx),t.target&&(t.hydrate?d.fragment.l((p=t.target,Array.from(p.childNodes))):d.fragment.c(),t.intro&&V(e.$$.fragment),U(e,t.target,t.anchor),A()),k(l)}"undefined"!=typeof HTMLElement&&(I=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){q(this,1),this.$destroy=r}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});class H{$destroy(){q(this,1),this.$destroy=r}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}n(1);function B(e){var t,n,c,a,i,s,l,u,g,_,w,y,k,S,O,C;return{c(){(t=m("label")).textContent="upstream",n=v(),c=m("video"),a=v(),i=m("nav"),(s=m("button")).textContent="start upstream",l=v(),u=m("span"),g=m("label"),_=m("input"),w=h("\n            webcam"),y=v(),k=m("label"),S=m("input"),O=h("\n            noise"),b(t,"for","upstream"),b(c,"id","upstream"),c.autoplay="true",b(c,"width","400"),b(c,"height","300"),b(c,"class","svelte-v4j238"),e.$$binding_groups[0].push(_),b(_,"type","radio"),_.__value=G,_.value=_.__value,e.$$binding_groups[0].push(S),b(S,"type","radio"),S.__value=K,S.value=S.__value,b(i,"class","svelte-v4j238"),C=[$(s,"click",e.startUpstream),$(_,"change",e.input0_change_handler),$(S,"change",e.input1_change_handler)]},m(r,o){f(r,t,o),f(r,n,o),f(r,c,o),e.video_binding(c),f(r,a,o),f(r,i,o),d(i,s),d(i,l),d(i,u),d(u,g),d(g,_),_.checked=_.__value===e.upstreamSource,d(g,w),d(u,y),d(u,k),d(k,S),S.checked=S.__value===e.upstreamSource,d(k,O)},p(e,t){e.upstreamSource&&(_.checked=_.__value===t.upstreamSource),_.value=_.__value,e.upstreamSource&&(S.checked=S.__value===t.upstreamSource),S.value=S.__value},i:r,o:r,d(r){r&&(p(t),p(n),p(c)),e.video_binding(null),r&&(p(a),p(i)),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(_),1),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(S),1),o(C)}}}async function G(){return await navigator.mediaDevices.getUserMedia({video:!0})}function K(){let e=Object.assign(document.createElement("canvas"),{width:400,height:300}),t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);let n=t.getImageData(0,0,e.width,e.height);return requestAnimationFrame(function e(){for(var r=0;r<n.data.length;r++)n.data[r++]=n.data[r++]=n.data[r++]=255*Math.random();t.putImageData(n,0,0),requestAnimationFrame(e)}),e.captureStream(60)}function Q(e,t,n){const r=C();let c,a=G;O(()=>{});return{upstreamSource:a,upstreamVideo:c,startUpstream:async function(){const e=await a();console.debug({stream:e}),c.srcObject=e,n("upstreamVideo",c),r("stream",e)},video_binding:function(e){j[e?"unshift":"push"](()=>{n("upstreamVideo",c=e)})},input0_change_handler:function(){a=this.__value,n("upstreamSource",a)},input1_change_handler:function(){a=this.__value,n("upstreamSource",a)},$$binding_groups:[[]]}}var W=class extends H{constructor(e){super(),F(this,e,Q,B,s,[])}};const X=[];function Y(e,t=r){let n;const c=[];function a(t){if(s(e,t)&&(e=t,n)){const t=!X.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),X.push(n,e)}if(t){for(let e=0;e<X.length;e+=2)X[e][0](X[e+1]);X.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,i=r){const s=[o,i];return c.push(s),1===c.length&&(n=t(a)||r),o(e),()=>{const e=c.indexOf(s);-1!==e&&c.splice(e,1),0===c.length&&(n(),n=null)}}}}const Z=Y({}),ee=Y({}),te=Y({}),ne=e=>t=>n=>e.update(e=>({...e,[t]:n})),re=ne(Z),ce=ne(ee),ae=(e=>t=>n=>e.update(e=>({...e,[t]:[...e[t]||[],n]})))(te),oe=(e=>t=>e.update(e=>({...e,[t]:[]})))(te);n(2);function ie(e){var t,n,r,c,a,o,i,s=e.localOffer&&se(e),l=e.$answer[e.name]&&le(e);return{c(){t=m("label"),n=h("1.\n                    "),(r=m("button")).textContent="create offer",c=v(),s&&s.c(),a=v(),l&&l.c(),o=g(),i=$(r,"click",e.createOffer)},m(e,i){f(e,t,i),d(t,n),d(t,r),f(e,c,i),s&&s.m(e,i),f(e,a,i),l&&l.m(e,i),f(e,o,i)},p(e,t){t.localOffer?s?s.p(e,t):((s=se(t)).c(),s.m(a.parentNode,a)):s&&(s.d(1),s=null),t.$answer[t.name]?l?l.p(e,t):((l=le(t)).c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},d(e){e&&(p(t),p(c)),s&&s.d(e),e&&p(a),l&&l.d(e),e&&p(o),i()}}}function se(e){var t,n,r,c,a,i,s,l,u,g,_,w;return{c(){t=m("div"),n=m("textarea"),c=v(),a=m("br"),i=v(),s=m("label"),l=h("2.\n                            "),(u=m("button")).textContent="setLocalDescription",g=v(),(_=m("button")).textContent="send offer",n.readOnly=!0,b(n,"cols","60"),b(n,"rows","20"),n.value=r=e.justTheSdp(e.localOffer),b(n,"class","svelte-12pweht"),w=[$(u,"click",e.click_handler),$(_,"click",e.click_handler_1)]},m(e,r){f(e,t,r),d(t,n),d(t,c),d(t,a),d(t,i),d(t,s),d(s,l),d(s,u),d(s,g),d(s,_)},p(e,t){e.localOffer&&r!==(r=t.justTheSdp(t.localOffer))&&(n.value=r)},d(e){e&&p(t),o(w)}}}function le(e){var t,n,r,c,a,o,i,s,l,u;return{c(){t=m("div"),n=m("textarea"),c=v(),a=m("br"),o=v(),i=m("label"),s=h("5.\n                            "),(l=m("button")).textContent="setRemoteDescription",n.readOnly=!0,b(n,"cols","60"),b(n,"rows","20"),n.value=r=e.justTheSdp(e.$answer[e.name]),b(n,"class","svelte-12pweht"),u=$(l,"click",e.click_handler_2)},m(e,r){f(e,t,r),d(t,n),d(t,c),d(t,a),d(t,o),d(t,i),d(i,s),d(i,l)},p(e,t){(e.$answer||e.name)&&r!==(r=t.justTheSdp(t.$answer[t.name]))&&(n.value=r)},d(e){e&&p(t),u()}}}function ue(e){var t,n,r=e.receivedOffer&&de(e),c=e.localOffer&&fe(e);return{c(){r&&r.c(),t=v(),c&&c.c(),n=g()},m(e,a){r&&r.m(e,a),f(e,t,a),c&&c.m(e,a),f(e,n,a)},p(e,a){a.receivedOffer?r?r.p(e,a):((r=de(a)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),a.localOffer?c?c.p(e,a):((c=fe(a)).c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(e){r&&r.d(e),e&&p(t),c&&c.d(e),e&&p(n)}}}function de(e){var t,n,r,c,a,i,s,l,u,g,_,w;return{c(){t=m("div"),n=m("textarea"),c=v(),a=m("br"),i=v(),s=m("label"),l=h("3.\n                            "),(u=m("button")).textContent="setRemoteDescription",g=v(),(_=m("button")).textContent="create answer",n.readOnly=!0,b(n,"cols","60"),b(n,"rows","20"),n.value=r=e.justTheSdp(e.receivedOffer),b(n,"class","svelte-12pweht"),w=[$(u,"click",e.click_handler_3),$(_,"click",e.createAnswer)]},m(e,r){f(e,t,r),d(t,n),d(t,c),d(t,a),d(t,i),d(t,s),d(s,l),d(s,u),d(s,g),d(s,_)},p(e,t){e.receivedOffer&&r!==(r=t.justTheSdp(t.receivedOffer))&&(n.value=r)},d(e){e&&p(t),o(w)}}}function fe(e){var t,n,r,c,a,i,s,l,u,g,_,w;return{c(){t=m("div"),n=m("textarea"),c=v(),a=m("br"),i=v(),s=m("label"),l=h("4.\n                            "),(u=m("button")).textContent="setLocalDescription",g=v(),(_=m("button")).textContent="send answer",n.readOnly=!0,b(n,"cols","60"),b(n,"rows","20"),n.value=r=e.justTheSdp(e.localOffer),b(n,"class","svelte-12pweht"),w=[$(u,"click",e.click_handler_4),$(_,"click",e.click_handler_5)]},m(e,r){f(e,t,r),d(t,n),d(t,c),d(t,a),d(t,i),d(t,s),d(s,l),d(s,u),d(s,g),d(s,_)},p(e,t){e.localOffer&&r!==(r=t.justTheSdp(t.localOffer))&&(n.value=r)},d(e){e&&p(t),o(w)}}}function pe(e){var t,n;return{c(){(t=m("textarea")).readOnly=!0,b(t,"cols","60"),b(t,"rows","20"),t.value=n=" "+e.myCandidates.map(e.JSON.stringify).join("\n")+" ",b(t,"class","svelte-12pweht")},m(e,n){f(e,t,n)},p(e,r){e.myCandidates&&n!==(n=" "+r.myCandidates.map(r.JSON.stringify).join("\n")+" ")&&(t.value=n)},d(e){e&&p(t)}}}function me(e){var t,n,r,c,a,i,s,l,u,g,w,y,k,S,O,C,x,j,R,T,E,N,D,L,A,M,J,P,I,F,H,B,G,K,Q,X,Y,Z,ee,te,ne,re,ce,ae,oe,se,le,de,fe,me=e.events.join(",")+"",he=new W({});he.$on("stream",e.stream_handler);var ve=e.isCaller&&ie(e),ge=e.isReceiver&&ue(e),$e=e.myCandidates.length&&pe(e);return{c(){t=m("section"),n=m("h3"),r=h(e.name),c=v(),a=m("small"),i=h("talking to "),s=h(e.recipient),l=v(),u=m("div"),g=m("div"),he.$$.fragment.c(),w=v(),y=m("div"),(k=m("label")).textContent="downstream",S=v(),O=m("video"),C=v(),x=m("div"),j=m("label"),R=h("signaling: "),T=m("code"),E=h(e.signalingState),N=v(),D=m("label"),L=h("connection:"),A=m("code"),M=h(e.connectionState),J=v(),P=m("label"),I=h("ice:       "),F=m("code"),H=h(e.iceConnectionState),B=v(),G=m("small"),K=h(me),Q=v(),X=m("fieldset"),Y=m("span"),Z=m("label"),ee=m("input"),te=h("\n                        caller"),ne=v(),re=m("label"),ce=m("input"),ae=h("\n                        receiver"),oe=v(),ve&&ve.c(),se=v(),ge&&ge.c(),le=v(),$e&&$e.c(),b(g,"id","upstream"),b(g,"class","svelte-12pweht"),b(k,"for","downstream"),O.autoplay="true",b(O,"width","400"),b(O,"height","300"),b(O,"class","svelte-12pweht"),b(y,"id","downstream"),b(y,"class","svelte-12pweht"),b(T,"class","svelte-12pweht"),b(A,"class","svelte-12pweht"),b(F,"class","svelte-12pweht"),b(ee,"type","checkbox"),b(ce,"type","checkbox"),b(Y,"class","svelte-12pweht"),b(X,"class","svelte-12pweht"),b(x,"id","signaling"),b(x,"class","svelte-12pweht"),b(u,"id","streams"),b(u,"class","svelte-12pweht"),fe=[$(ee,"change",e.input0_change_handler),$(ce,"change",e.input1_change_handler)]},m(o,p){f(o,t,p),d(t,n),d(n,r),d(t,c),d(t,a),d(a,i),d(a,s),d(t,l),d(t,u),d(u,g),U(he,g,null),d(u,w),d(u,y),d(y,k),d(y,S),d(y,O),e.video_binding(O),d(u,C),d(u,x),d(x,j),d(j,R),d(j,T),d(T,E),d(x,N),d(x,D),d(D,L),d(D,A),d(A,M),d(x,J),d(x,P),d(P,I),d(P,F),d(F,H),d(x,B),d(x,G),d(G,K),d(x,Q),d(x,X),d(X,Y),d(Y,Z),d(Z,ee),ee.checked=e.isCaller,d(Z,te),d(Y,ne),d(Y,re),d(re,ce),ce.checked=e.isReceiver,d(re,ae),d(x,oe),ve&&ve.m(x,null),d(x,se),ge&&ge.m(x,null),d(x,le),$e&&$e.m(x,null),de=!0},p(e,t){de&&!e.name||_(r,t.name),de&&!e.recipient||_(s,t.recipient),de&&!e.signalingState||_(E,t.signalingState),de&&!e.connectionState||_(M,t.connectionState),de&&!e.iceConnectionState||_(H,t.iceConnectionState),de&&!e.events||me===(me=t.events.join(",")+"")||_(K,me),e.isCaller&&(ee.checked=t.isCaller),e.isReceiver&&(ce.checked=t.isReceiver),t.isCaller?ve?ve.p(e,t):((ve=ie(t)).c(),ve.m(x,se)):ve&&(ve.d(1),ve=null),t.isReceiver?ge?ge.p(e,t):((ge=ue(t)).c(),ge.m(x,le)):ge&&(ge.d(1),ge=null),t.myCandidates.length?$e?$e.p(e,t):(($e=pe(t)).c(),$e.m(x,null)):$e&&($e.d(1),$e=null)},i(e){de||(V(he.$$.fragment,e),de=!0)},o(e){z(he.$$.fragment,e),de=!1},d(n){n&&p(t),q(he),e.video_binding(null),ve&&ve.d(),ge&&ge.d(),$e&&$e.d(),o(fe)}}}function he(e,t,n){let r,c,a;u(e,Z,e=>{n("$offer",r=e)}),u(e,ee,e=>{n("$answer",c=e)}),u(e,te,e=>{n("$candidates",a=e)});const o=C();let{name:i="unnamed participant",recipient:s=null}=t;const l=re(s),d=ce(s),f=ae(s);let p,m,h,{isCaller:v=!1,isReceiver:g=!1}=t,$=[],b="",_="",w="",y="",k=[],S=(()=>"unified-plan"===new URL(document.location).searchParams.get("semantic")?{sdpSemantics:"unified-plan"}:{sdpSemantics:"plan-b"})();function x(e,t){n("events",$=[...$,e]),o("event",{name:i,short:e,event:t})}function R(e){h?(x("rt","replace track"),console.info("replace track",{sender:h}),h.replaceTrack(e.getTracks()[0])):(x("at","add track"),console.info("add track"),h=m.addTrack(e.getTracks()[0],e))}async function T(e){x("l","setLocalDescription"),console.debug("localDescription ->",e);const t=JSON.parse(e);m.setLocalDescription(t),(a[i]||[]).forEach(e=>{e&&(x("ac","addIceCandidate"),m.addIceCandidate(e))}),oe(i)}function E(e){x("r","setRemoteDescription");const t=JSON.parse(e);console.debug("remoteDescription ->",e),m.setRemoteDescription(t)}let N,D;return O(()=>{m=function(){S.sdpSemantics;const e=new RTCPeerConnection(S);return e.ontrack=e=>{const{track:t,streams:r,transceiver:c}=e,a=r[0];p.srcObject=a,n("downstreamVideo",p),a.onaddtrack=()=>console.warn(`${i}track added to stream`,{track:t,stream:a}),"video"==t.kind&&(console.info(`${i}.ontrack`,{track:t,streams:r,kind:t.kind,transceiver:c}),t.onmute=e=>{console.info(`${i} track onmute`,{event:e}),p.srcObject=null,n("downstreamVideo",p)},t.onunmute=e=>{console.info(`${i} track onunmute`,{event:e}),p.srcObject=a,n("downstreamVideo",p)},t.onended=e=>{console.debug(`${i} track onended`,{event:e})})},e.onicecandidate=({candidate:e})=>{x("lc","create candidate"),n("myCandidates",k=[...k,e]),f(e)},e.onsignalingstatechange=t=>{const r=b=e.signalingState;return n("signalingState",b),r},e.onconnectionstatechange=t=>{const r=_=e.connectionState;return n("connectionState",_),r},e.oniceconnectionstatechange=t=>{const r=w=e.iceConnectionState;return n("iceConnectionState",w),r},console.info(`setup RTCPeerConnection for ${i}`,S,e),e}(),te.subscribe(({[i]:e})=>{e&&(x("rc"),console.debug(`received candidate by ${i}`,e))})}),e.$set=e=>{"name"in e&&n("name",i=e.name),"recipient"in e&&n("recipient",s=e.recipient),"isCaller"in e&&n("isCaller",v=e.isCaller),"isReceiver"in e&&n("isReceiver",g=e.isReceiver)},e.$$.update=(e={$offer:1,name:1,$answer:1})=>{(e.$offer||e.name)&&n("receivedOffer",N=r[i]),(e.$answer||e.name)&&(D=c[i])},{name:i,recipient:s,sendOffer:l,sendAnswer:d,isCaller:v,isReceiver:g,downstreamVideo:p,events:$,signalingState:b,connectionState:_,iceConnectionState:w,localOffer:y,myCandidates:k,addStream:R,createOffer:async function(){x("o","create offer");const e=await m.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!1});n("localOffer",y=JSON.stringify(e,null,4))},createAnswer:async function(){x("a","create answer");const e=await m.createAnswer();n("localOffer",y=JSON.stringify(e,null,4))},applyLocal:T,applyRemote:E,justTheSdp:e=>JSON.parse(e).sdp,receivedOffer:N,$answer:c,JSON:JSON,stream_handler:function({detail:e}){return R(e)},video_binding:function(e){j[e?"unshift":"push"](()=>{n("downstreamVideo",p=e)})},input0_change_handler:function(){v=this.checked,n("isCaller",v)},input1_change_handler:function(){g=this.checked,n("isReceiver",g)},click_handler:function(){return T(y)},click_handler_1:function(){return l(y)},click_handler_2:function(){return E(c[i])},click_handler_3:function(){return E(N)},click_handler_4:function(){return T(y)},click_handler_5:function(){return d(y)}}}var ve=class extends H{constructor(e){super(),F(this,e,he,me,s,["name","recipient","isCaller","isReceiver"])}};n(3);function ge(e,t,n){const r=Object.create(e);return r.name=t[n].name,r.event=t[n].event,r}function $e(e){var t,n,r,c,a,o=e.name+"",i=e.event+"";return{c(){t=m("li"),n=h(o),r=h(": "),c=h(i),a=v()},m(e,o){f(e,t,o),d(t,n),d(t,r),d(t,c),d(t,a)},p(e,t){e.events&&o!==(o=t.name+"")&&_(n,o),e.events&&i!==(i=t.event+"")&&_(c,i)},d(e){e&&p(t)}}}function be(e){var t,n,r,c,a,o,i,s,l,u,h,g,$=new ve({props:{name:"alice",isCaller:"true",recipient:"bob"}});$.$on("event",e.addEvent);var _=new ve({props:{name:"bob",isReceiver:"true",recipient:"alice"}});_.$on("event",e.addEvent);for(var w=e.events.filter(_e),y=[],k=0;k<w.length;k+=1)y[k]=$e(ge(e,w,k));return{c(){(t=m("h2")).textContent="demo",n=v(),r=m("div"),c=m("nav"),a=v(),o=m("section"),$.$$.fragment.c(),i=v(),_.$$.fragment.c(),s=v(),l=m("ol");for(var e=0;e<y.length;e+=1)y[e].c();u=v(),(h=m("em")).innerHTML='please open <code class="svelte-ze5hlw"> chrome://webrtc-internals </code>',b(o,"class","svelte-ze5hlw"),b(r,"class","svelte-ze5hlw")},m(e,p){f(e,t,p),f(e,n,p),f(e,r,p),d(r,c),d(r,a),d(r,o),U($,o,null),d(o,i),U(_,o,null),d(o,s),d(o,l);for(var m=0;m<y.length;m+=1)y[m].m(l,null);d(o,u),d(o,h),g=!0},p(e,t){if(e.events){w=t.events.filter(_e);for(var n=0;n<w.length;n+=1){const r=ge(t,w,n);y[n]?y[n].p(e,r):(y[n]=$e(r),y[n].c(),y[n].m(l,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=w.length}},i(e){g||(V($.$$.fragment,e),V(_.$$.fragment,e),g=!0)},o(e){z($.$$.fragment,e),z(_.$$.fragment,e),g=!1},d(e){e&&(p(t),p(n),p(r)),q($),q(_),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(y,e)}}}function _e(e){return e.event}function we(e,t,n){let r=[];return{events:r,addEvent:({detail:e})=>{n("events",r=[...r,e])}}}var ye=class extends H{constructor(e){super(),F(this,e,we,be,s,[])}};function ke(e){var t,n=new ye({});return{c(){n.$$.fragment.c()},m(e,r){U(n,e,r),t=!0},p:r,i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){z(n.$$.fragment,e),t=!1},d(e){q(n,e)}}}const Se=new class extends H{constructor(e){super(),F(this,e,null,ke,s,[])}}({target:document.body,props:{}});window.app=Se;t.default=Se}]);